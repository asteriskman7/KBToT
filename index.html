<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Kristen Bell's Triangle of Transcendence</title>
    <link rel="icon" href="favicon.png" id="linkIcon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Azeret+Mono:ital,wght@0,100..900;1,100..900&family=Borel&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="index.css">    
  </head>
  <body>
    <div id='infoBox'>
      <div id='title' class='title'>Kristen Bell's Triangle of Transcendence</div>
      <div>Total play time: <span id='infoPlayTime'></span></div>
      <div>Next completion in: <span id='infoNext'></span><input id='infoNextCheck' type='checkbox'>Any</div>
      <div>Total time remaining: <span id='infoTimeRemaining'></span></div>
      <div>Total luck / tick length: <span id='infoLuckTick'>238072 / 32.43</span></div>
      <div>Symbol threshold: <input id='infoThreshSlider' type='range' min='-1.2' max='1.2' value='0' step='0.05'><span id='infoThreshDisp'>0.0</span></div>
      <div id='infoProgressContainer'><div id='infoProgress'></div></div>
      <div>There are no upgrades.<br>There is only the luck you have gained from being in the same plane of existence as Kristen Bell.</div>
      <hr>
      <div>Discuss on <a href='https://discord.gg/pC9RY5B'>discord</a>.</div>
      <div id='infoButtons'>
        <button id='resetButton'>Reset Game</button>
        <button id='imexShow'>Import/Export</button>
        <button id='helpButton'>Help</button>
        <div id='att'>&#128012; approved</div>
      </div>
    </div>  
    <div id='cellsContainer'></div>
    <dialog id='helpContainer'>
      <div id='helpTop'>
        <div>
          <div id='helpWelcome'>
            Hey there! Kristen Bell here. Welcome to <div id='helpTitle'>Kristen Bell's Triangle of Transcendence!</div>
            <div>Feel free to review the info below or just jump straight in. You're gonna have a blast!</div>
          </div>
          <div>
            You can review this help later by clicking the Help button in the info box.
          </div>
          <div>
            <ul>
              <li>Each cell in the triangle has a value, N, based on the <a href='https://en.wikipedia.org/wiki/Bell_triangle'>Bell Triangle</a>.</li>
              <li>All previous cells must be complete at least once before a cell can be activated.</li>
              <li>When active, a cell randomly draws values in [1,N] (with replacement) until all of them have been found.</li>
              <li>On cell completion, you gain luck based on how many numbers were drawn.</li>
              <li>The luck gain is the standard deviations away from the expected number of attempts multiplied by N.</li>
              <li>To avoid a potentially devistating result, negative luck is capped at -1.2*N</li>
              <li>The rate at which values are drawn is based on your total luck.</li>
              <li>Once complete, you can re-run a cell to try and improve your luck but you may end up with a worse result.</li>
              <li>The game saves every 5 seconds.</li>
              <li>Extra cycles are run to catch up offline time, though long away times may never fully catch up.</li>
              <li>Use the slider in the info box to set the threshold for the - symbol to display unlucky cells.</li>
              <li>Complete all cells to win the game!</li>
            </ul>
          </div>
          <div>
            Each cell has 5 lines of information:
            <ol>
              <li>Cell value (and threshold indicator)</li>
              <li>Expected number of draws</li>
              <li>Draws so far : values remaining to be found</li>
              <li>Luck</li>
              <li>Estimated time remaining (and run indicator)</li>
            </ol>
          </div>
        </div>
        <div>
          <img id='imgHelp' src='./help.png'>
        </div>
      </div>
      <button id='helpClose'>Close</button>
    </dialog>
    <dialog id='resetContainer'>
      Are you sure you want to reset?
      <div>
        <button id='resetYes' class='buttonUtil'>Yes</button>
        <button id='resetNo' class='buttonUtil'>No</button>
      </div>
    </dialog>    
    <dialog id='winContainer'>
      <div id='winDialog'> 
        <div>
          Thank you for completing <span class='title'>Kristen Bell's Triangle of Transcendence!</span>
        </div>
        <div>
          Your support transcends all others'!
        </div>
        <div>
          Listen, kiddo, I'm super impressed and little worried but don't stress, because your queen will always love you!
        </div>
        <div>
          Your total play time was <span id='winPlayTime'></span>.
        </div>
      </div>
      <img id='winImg' src='./win.png'>
      <div>
        <button id='winClose'>Close</button>
      </div>
    </dialog>    
    <dialog id='imexContainer'>
      <div>Import / Export</div>
      <textarea id='imexText' rows='4' cols='20'></textarea>
      <div>
        <button id='imexImport' class='buttonUtil'>Import</button>
        <button id='imexExport' class='buttonUtil'>Export</button>
        <button id='imexClose' class='buttonUtil'>Close</button>
      </div>
    </dialog>    
    <script src='index.js'></script>
  </body>
</html>
